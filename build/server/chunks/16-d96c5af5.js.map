{"version":3,"file":"16-d96c5af5.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/dashboard/quizzes/create/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/16.js"],"sourcesContent":["import { p as prisma } from \"../../../../../chunks/prismadb.js\";\nimport { f as fail } from \"../../../../../chunks/index2.js\";\nimport slugify from \"slugify\";\nconst ssr = false;\nconst GROUP_QUESTION = [\n  { type: \"diagram\", label: \"Diagram Label Completion\" },\n  { type: \"true-false\", label: \"True / False / Not given\" },\n  { type: \"short\", label: \"Short Answer\" },\n  { type: \"single\", label: \"Single Answer\" },\n  { type: \"summary\", label: \"Summary, Note Completion With Hint\" },\n  { type: \"yes-no\", label: \"Yes / No / Not Given\" },\n  { type: \"matching\", label: \"Matching Heading\" }\n];\nconst actions = {\n  create: async ({ request }) => {\n    const data = await request.formData();\n    let title = data.get(\"title\");\n    let slug = data.get(\"slug\");\n    let passages = JSON.parse(data.get(\"passages\") || \"[]\");\n    if (!title) {\n      fail(400, { title, slug, passages, error: \"Title is required\" });\n    }\n    if (!slug) {\n      slug = slugify(title, \"_\");\n    }\n    let passage_data_create = passages.map((v, i) => {\n      return {\n        title: \"passage \" + i,\n        content: v.content,\n        group_questions: {\n          create: v.group_questions.map((v2, i2) => {\n            return {\n              title: GROUP_QUESTION.find((a) => v2.type == a.type).label ?? \"Group question\",\n              type: v2.type,\n              image: v2.image,\n              options: v2.options,\n              questions: {\n                create: v2.questions.map((v3, i3) => {\n                  return {\n                    question_name: v3.question_name || \"\",\n                    option_a: v3.option_a || \"\",\n                    option_b: v3.option_b || \"\",\n                    option_c: v3.option_c || \"\",\n                    option_d: v3.option_d || \"\",\n                    answer: {\n                      create: {\n                        answer_name: v3.answer\n                      }\n                    }\n                  };\n                })\n              }\n            };\n          })\n        }\n      };\n    });\n    try {\n      const quiz = await prisma.quizzes.create({\n        data: {\n          title,\n          slug,\n          work_time: new Date(60 * 60 * 1e3),\n          passages: {\n            create: passage_data_create\n          }\n        }\n      });\n      return { message: \"Mission Completed\" };\n    } catch (error) {\n      console.log(error);\n      fail(400, { title, slug, passages, error: \"Server error\" });\n    }\n  }\n};\nexport {\n  actions,\n  ssr\n};\n","import * as server from '../entries/pages/dashboard/quizzes/create/_page.server.ts.js';\n\nexport const index = 16;\nexport const component = async () => (await import('../entries/pages/dashboard/quizzes/create/_page.svelte.js')).default;\nexport const file = '_app/immutable/components/pages/dashboard/quizzes/create/_page.svelte-e2023687.js';\nexport { server };\nexport const imports = [\"_app/immutable/components/pages/dashboard/quizzes/create/_page.svelte-e2023687.js\",\"_app/immutable/chunks/index-98f9187f.js\",\"_app/immutable/chunks/navigation-2dc3ae2e.js\",\"_app/immutable/chunks/singletons-11903ee4.js\",\"_app/immutable/chunks/stores-4f285500.js\",\"_app/immutable/chunks/clickOutSide-179e661a.js\",\"_app/immutable/chunks/text-d0d0ba91.js\",\"_app/immutable/chunks/forms-5fa88b70.js\",\"_app/immutable/chunks/parse-f0c618df.js\"];\nexport const stylesheets = [\"_app/immutable/assets/_page-f0075ea3.css\",\"_app/immutable/assets/text-75daf976.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}
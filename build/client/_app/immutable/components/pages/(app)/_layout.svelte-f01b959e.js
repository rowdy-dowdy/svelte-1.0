import{S as vt,i as gt,s as pt,k as f,a as L,l as v,m as c,c as T,h as o,n as e,b as J,D as a,B as et,L as tt,H as _t,j as Es,M as ke,I as bt,q as U,r as R,u as mt,e as Yt,f as ce,g as lt,t as _e,d as at,o as ws,N as xs,O as Is,J as B,w as xt,K as N,x as It,y as kt,P as $t,Q as Ie,R as Pe,T as ks,z as yt,U as St,C as ys,E as Ss,F as zs,G as Vs,V as bs,W as Ds,X as es}from"../../../chunks/index-98f9187f.js";import{a as Ls,e as Ts}from"../../../chunks/forms-5fa88b70.js";import{i as Ms}from"../../../chunks/navigation-2dc3ae2e.js";import{l as Bs}from"../../../chunks/svelte-logo-24ddae96.js";import{c as Ns,s as ts}from"../../../chunks/clickOutSide-179e661a.js";import{p as wt}from"../../../chunks/stores-4f285500.js";import{i as Et}from"../../../chunks/list_message.svelte_svelte_type_style_lang-2f0e168a.js";function ss(i,t,s){const l=i.slice();return l[12]=t[s],l}function ls(i,t,s){const l=i.slice();return l[15]=t[s],l[17]=s,l}function as(i){let t;return{c(){t=f("div"),this.h()},l(s){t=v(s,"DIV",{class:!0}),c(t).forEach(o),this.h()},h(){e(t,"class","sr-only")},m(s,l){J(s,t,l),i[7](t)},p:et,d(s){s&&o(t),i[7](null)}}}function rs(i){let t,s=i[15].body+"",l,r;return{c(){t=f("div"),l=U(s),this.h()},l(u){t=v(u,"DIV",{class:!0});var n=c(t);l=R(n,s),n.forEach(o),this.h()},h(){e(t,"class",r="bg-gray-200 px-2.5 py-1.5 rounded rounded-r-full message-text "+(i[17]==0?"message-first":"")+" "+(i[17]==i[12].messages.length-1?"message-last":"")+" svelte-10nmnoi")},m(u,n){J(u,t,n),a(t,l)},p(u,n){n&8&&s!==(s=u[15].body+"")&&mt(l,s),n&8&&r!==(r="bg-gray-200 px-2.5 py-1.5 rounded rounded-r-full message-text "+(u[17]==0?"message-first":"")+" "+(u[17]==u[12].messages.length-1?"message-last":"")+" svelte-10nmnoi")&&e(t,"class",r)},d(u){u&&o(t)}}}function os(i){let t,s,l,r,u,n,h,d,p=i[12].messages,_=[];for(let g=0;g<p.length;g+=1)_[g]=rs(ls(i,p,g));return{c(){t=f("div"),s=f("div"),l=f("img"),u=L(),n=f("div");for(let g=0;g<_.length;g+=1)_[g].c();h=L(),this.h()},l(g){t=v(g,"DIV",{class:!0});var z=c(t);s=v(z,"DIV",{class:!0});var I=c(s);l=v(I,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),I.forEach(o),u=T(z),n=v(z,"DIV",{class:!0});var M=c(n);for(let b=0;b<_.length;b+=1)_[b].l(M);M.forEach(o),h=T(z),z.forEach(o),this.h()},h(){ke(l.src,r=i[4](i[12].userId).image)||e(l,"src",r),e(l,"alt"," "),e(l,"class","message-img w-8 h-8 rounded-full border object-cover svelte-10nmnoi"),e(l,"loading","lazy"),e(s,"class","flex-none sticky bottom-0 svelte-10nmnoi"),e(n,"class","flex-grow min-w-0 flex flex-col items-start space-y-1 max-w-[60%] svelte-10nmnoi"),e(t,"class",d="flex w-full space-x-2 items-end "+(i[12].isMe?"message-is-me":"")+" px-2 py-2 svelte-10nmnoi")},m(g,z){J(g,t,z),a(t,s),a(s,l),a(t,u),a(t,n);for(let I=0;I<_.length;I+=1)_[I].m(n,null);a(t,h)},p(g,z){if(z&8&&!ke(l.src,r=g[4](g[12].userId).image)&&e(l,"src",r),z&8){p=g[12].messages;let I;for(I=0;I<p.length;I+=1){const M=ls(g,p,I);_[I]?_[I].p(M,z):(_[I]=rs(M),_[I].c(),_[I].m(n,null))}for(;I<_.length;I+=1)_[I].d(1);_.length=p.length}z&8&&d!==(d="flex w-full space-x-2 items-end "+(g[12].isMe?"message-is-me":"")+" px-2 py-2 svelte-10nmnoi")&&e(t,"class",d)},d(g){g&&o(t),tt(_,g)}}}function Ps(i){let t,s,l,r=i[1]&&as(i),u=i[3],n=[];for(let h=0;h<u.length;h+=1)n[h]=os(ss(i,u,h));return{c(){t=f("div"),s=f("div"),r&&r.c(),l=L();for(let h=0;h<n.length;h+=1)n[h].c();this.h()},l(h){t=v(h,"DIV",{class:!0});var d=c(t);s=v(d,"DIV",{class:!0});var p=c(s);r&&r.l(p),l=T(p);for(let _=0;_<n.length;_+=1)n[_].l(p);p.forEach(o),d.forEach(o),this.h()},h(){e(s,"class","flex flex-col justify-end text-[#333]"),e(t,"class","flex-grow min-h-0 basis-0 overflow-y-auto")},m(h,d){J(h,t,d),a(t,s),r&&r.m(s,null),a(s,l);for(let p=0;p<n.length;p+=1)n[p].m(s,null);i[8](t)},p(h,[d]){if(h[1]?r?r.p(h,d):(r=as(h),r.c(),r.m(s,l)):r&&(r.d(1),r=null),d&24){u=h[3];let p;for(p=0;p<u.length;p+=1){const _=ss(h,u,p);n[p]?n[p].p(_,d):(n[p]=os(_),n[p].c(),n[p].m(s,null))}for(;p<n.length;p+=1)n[p].d(1);n.length=u.length}},i:et,o:et,d(h){h&&o(t),r&&r.d(),tt(n,h),i[8](null)}}}function As(i,t,s){let l,r;_t(i,wt,b=>s(9,r=b));let{messages:u}=t,{users:n}=t,{pageChat:h}=t,{messagesLoadMore:d}=t;const p=b=>{let k=[];if(b.length<=0)return[];let x=b[0].senderID;return k.unshift({isMe:b[0].senderID==r.data.user.id,userId:b[0].senderID,messages:[]}),b.forEach(V=>{V.senderID!=x&&(k.unshift({isMe:V.senderID==r.data.user.id,userId:V.senderID,messages:[]}),x=V.senderID),k[0].messages.unshift(V)}),k};let _=null;Es(()=>{l&&g(_)});const g=async b=>{b.scroll({top:b.scrollHeight,behavior:"smooth"})},z=b=>n.find(k=>k.id==b)||null;function I(b){bt[b?"unshift":"push"](()=>{d=b,s(0,d)})}function M(b){bt[b?"unshift":"push"](()=>{_=b,s(2,_)})}return i.$$set=b=>{"messages"in b&&s(5,u=b.messages),"users"in b&&s(6,n=b.users),"pageChat"in b&&s(1,h=b.pageChat),"messagesLoadMore"in b&&s(0,d=b.messagesLoadMore)},i.$$.update=()=>{i.$$.dirty&32&&s(3,l=p(u))},[d,h,_,l,z,u,n,I,M]}class Cs extends vt{constructor(t){super(),gt(this,t,As,Ps,pt,{messages:5,users:6,pageChat:1,messagesLoadMore:0})}}function ns(i){var ye,Ce;let t,s,l,r,u,n,h,d=(((ye=i[0])==null?void 0:ye.name)||((Ce=i[3])==null?void 0:Ce.name))+"",p,_,g,z,I,M,b,k,x,V,S,E,m,y,w,D,W,j,O,F,K,$,A,C,P,G,Q,de,le,ae,he,X,ee,Z,te,me,oe,q,fe,be,ne,pe,We,Ve,De,Ge;function st(H){i[6](H)}let Ae={messages:i[0].messages,pageChat:i[0].page,users:i[0].users};i[2]!==void 0&&(Ae.messagesLoadMore=i[2]),k=new Cs({props:Ae}),bt.push(()=>Is(k,"messagesLoadMore",st,i[2]));function qe(H,Y){return H[1]!=""?Os:Hs}let je=qe(i),ie=je(i);return{c(){t=f("div"),s=f("div"),l=f("div"),r=f("img"),n=L(),h=f("div"),p=U(d),_=L(),g=f("button"),z=f("span"),I=B("svg"),M=B("path"),b=L(),xt(k.$$.fragment),V=L(),S=f("form"),E=f("span"),m=B("svg"),y=B("path"),w=L(),D=f("div"),W=f("span"),j=B("svg"),O=B("path"),F=B("path"),K=B("path"),$=L(),A=f("span"),C=B("svg"),P=B("path"),G=B("circle"),Q=B("circle"),de=L(),le=f("span"),ae=B("svg"),he=B("path"),ee=L(),Z=f("div"),te=f("input"),me=L(),oe=f("span"),q=B("svg"),fe=B("path"),be=B("path"),ne=B("circle"),pe=B("circle"),We=L(),ie.c(),this.h()},l(H){t=v(H,"DIV",{class:!0});var Y=c(t);s=v(Y,"DIV",{class:!0});var re=c(s);l=v(re,"DIV",{class:!0});var ve=c(l);r=v(ve,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),ve.forEach(o),n=T(re),h=v(re,"DIV",{class:!0});var Se=c(h);p=R(Se,d),Se.forEach(o),_=T(re),g=v(re,"BUTTON",{});var Je=c(g);z=v(Je,"SPAN",{class:!0});var we=c(z);I=N(we,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var He=c(I);M=N(He,"path",{d:!0}),c(M).forEach(o),He.forEach(o),we.forEach(o),Je.forEach(o),re.forEach(o),b=T(Y),It(k.$$.fragment,Y),V=T(Y),S=v(Y,"FORM",{class:!0});var Ee=c(S);E=v(Ee,"SPAN",{class:!0});var Ke=c(E);m=N(Ke,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var Oe=c(m);y=N(Oe,"path",{d:!0}),c(y).forEach(o),Oe.forEach(o),Ke.forEach(o),w=T(Ee),D=v(Ee,"DIV",{class:!0});var Le=c(D);W=v(Le,"SPAN",{class:!0});var Qe=c(W);j=N(Qe,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var ze=c(j);O=N(ze,"path",{d:!0}),c(O).forEach(o),F=N(ze,"path",{d:!0}),c(F).forEach(o),K=N(ze,"path",{d:!0}),c(K).forEach(o),ze.forEach(o),Qe.forEach(o),$=T(Le),A=v(Le,"SPAN",{class:!0});var Xe=c(A);C=N(Xe,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var Ue=c(C);P=N(Ue,"path",{d:!0}),c(P).forEach(o),G=N(Ue,"circle",{cx:!0,cy:!0,r:!0}),c(G).forEach(o),Q=N(Ue,"circle",{cx:!0,cy:!0,r:!0}),c(Q).forEach(o),Ue.forEach(o),Xe.forEach(o),de=T(Le),le=v(Le,"SPAN",{class:!0});var Te=c(le);ae=N(Te,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var ge=c(ae);he=N(ge,"path",{d:!0}),c(he).forEach(o),ge.forEach(o),Te.forEach(o),Le.forEach(o),ee=T(Ee),Z=v(Ee,"DIV",{class:!0});var ue=c(Z);te=v(ue,"INPUT",{type:!0,placeholder:!0,class:!0}),me=T(ue),oe=v(ue,"SPAN",{class:!0});var Fe=c(oe);q=N(Fe,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var xe=c(q);fe=N(xe,"path",{d:!0}),c(fe).forEach(o),be=N(xe,"path",{d:!0}),c(be).forEach(o),ne=N(xe,"circle",{cx:!0,cy:!0,r:!0}),c(ne).forEach(o),pe=N(xe,"circle",{cx:!0,cy:!0,r:!0}),c(pe).forEach(o),xe.forEach(o),Fe.forEach(o),ue.forEach(o),We=T(Ee),ie.l(Ee),Ee.forEach(o),Y.forEach(o),this.h()},h(){var H;ke(r.src,u=(H=i[3])==null?void 0:H.image)||e(r,"src",u),e(r,"alt"," "),e(r,"class","w-9 h-9 rounded-full object-cover border"),e(r,"loading","lazy"),e(l,"class","flex-none py-2"),e(h,"class","flex-grow"),e(M,"d","m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"),e(I,"xmlns","http://www.w3.org/2000/svg"),e(I,"width","24"),e(I,"height","24"),e(I,"viewBox","0 0 24 24"),e(z,"class","icon"),e(s,"class","flex-none flex items-center justify-between space-x-2 px-2 shadow"),e(y,"d","M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"),e(m,"xmlns","http://www.w3.org/2000/svg"),e(m,"width","24"),e(m,"height","24"),e(m,"viewBox","0 0 24 24"),e(E,"class","flex-none icon w-6 h-6 p-0.5 rounded-full hover:bg-gray-100 cursor-pointer"),e(O,"d","M20 2H8c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zM8 16V4h12l.002 12H8z"),e(F,"d","M4 8H2v12c0 1.103.897 2 2 2h12v-2H4V8z"),e(K,"d","m12 12-1-1-2 3h10l-4-6z"),e(j,"xmlns","http://www.w3.org/2000/svg"),e(j,"width","24"),e(j,"height","24"),e(j,"viewBox","0 0 24 24"),e(W,"class","flex-none icon w-6 h-6 p-0.5 rounded-full hover:bg-gray-100 cursor-pointer"),e(P,"d","M12 2c-4.963 0-9 4.038-9 9v8h.051c.245 1.691 1.69 3 3.449 3 1.174 0 2.074-.417 2.672-1.174a3.99 3.99 0 0 0 5.668-.014c.601.762 1.504 1.188 2.66 1.188 1.93 0 3.5-1.57 3.5-3.5V11c0-4.962-4.037-9-9-9zm7 16.5c0 .827-.673 1.5-1.5 1.5-.449 0-1.5 0-1.5-2v-1h-2v1c0 1.103-.897 2-2 2s-2-.897-2-2v-1H8v1c0 1.845-.774 2-1.5 2-.827 0-1.5-.673-1.5-1.5V11c0-3.86 3.141-7 7-7s7 3.14 7 7v7.5z"),e(G,"cx","9"),e(G,"cy","10"),e(G,"r","2"),e(Q,"cx","15"),e(Q,"cy","10"),e(Q,"r","2"),e(C,"xmlns","http://www.w3.org/2000/svg"),e(C,"width","24"),e(C,"height","24"),e(C,"viewBox","0 0 24 24"),e(A,"class","flex-none icon w-6 h-6 p-0.5 rounded-full hover:bg-gray-100 cursor-pointer"),e(he,"d","M20 7h-1.209A4.92 4.92 0 0 0 19 5.5C19 3.57 17.43 2 15.5 2c-1.622 0-2.705 1.482-3.404 3.085C11.407 3.57 10.269 2 8.5 2 6.57 2 5 3.57 5 5.5c0 .596.079 1.089.209 1.5H4c-1.103 0-2 .897-2 2v2c0 1.103.897 2 2 2v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7c1.103 0 2-.897 2-2V9c0-1.103-.897-2-2-2zm-4.5-3c.827 0 1.5.673 1.5 1.5C17 7 16.374 7 16 7h-2.478c.511-1.576 1.253-3 1.978-3zM7 5.5C7 4.673 7.673 4 8.5 4c.888 0 1.714 1.525 2.198 3H8c-.374 0-1 0-1-1.5zM4 9h7v2H4V9zm2 11v-7h5v7H6zm12 0h-5v-7h5v7zm-5-9V9.085L13.017 9H20l.001 2H13z"),e(ae,"xmlns","http://www.w3.org/2000/svg"),e(ae,"width","24"),e(ae,"height","24"),e(ae,"viewBox","0 0 24 24"),e(le,"class","flex-none icon w-6 h-6 p-0.5 rounded-full hover:bg-gray-100 cursor-pointer"),e(D,"class",X="flex-none flex space-x-2 items-center w-[88px] transition-all overflow-hidden "+(i[1]!=""?"!w-0 !-ml-2":"")),e(te,"type","text"),e(te,"placeholder","Aa"),e(te,"class","flex-grow min-w-0 text-$primary"),e(fe,"d","M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"),e(be,"d","M14.829 14.828a4.055 4.055 0 0 1-1.272.858 4.002 4.002 0 0 1-4.875-1.45l-1.658 1.119a6.063 6.063 0 0 0 1.621 1.62 5.963 5.963 0 0 0 2.148.903 6.042 6.042 0 0 0 2.415 0 5.972 5.972 0 0 0 2.148-.903c.313-.212.612-.458.886-.731.272-.271.52-.571.734-.889l-1.658-1.119a4.017 4.017 0 0 1-.489.592z"),e(ne,"cx","8.5"),e(ne,"cy","10.5"),e(ne,"r","1.5"),e(pe,"cx","15.493"),e(pe,"cy","10.493"),e(pe,"r","1.493"),e(q,"xmlns","http://www.w3.org/2000/svg"),e(q,"width","24"),e(q,"height","24"),e(q,"viewBox","0 0 24 24"),e(oe,"class","flex-none icon w-6 h-6 p-0.5 rounded-full hover:bg-gray-100 cursor-pointer"),e(Z,"class","flex-grow min-w-0 flex items-center rounded-full bg-gray-100 pl-3 py-1"),e(S,"class","flex-none flex space-x-2 items-center px-2 py-2 text-gray-500"),e(t,"class","flex-none flex flex-col bg-white shadow rounded w-80 max-h-96 h-full text-sm pointer-events-auto")},m(H,Y){J(H,t,Y),a(t,s),a(s,l),a(l,r),a(s,n),a(s,h),a(h,p),a(s,_),a(s,g),a(g,z),a(z,I),a(I,M),a(t,b),kt(k,t,null),a(t,V),a(t,S),a(S,E),a(E,m),a(m,y),a(S,w),a(S,D),a(D,W),a(W,j),a(j,O),a(j,F),a(j,K),a(D,$),a(D,A),a(A,C),a(C,P),a(C,G),a(C,Q),a(D,de),a(D,le),a(le,ae),a(ae,he),a(S,ee),a(S,Z),a(Z,te),$t(te,i[1]),a(Z,me),a(Z,oe),a(oe,q),a(q,fe),a(q,be),a(q,ne),a(q,pe),a(S,We),ie.m(S,null),Ve=!0,De||(Ge=[Ie(g,"click",Pe(i[5])),Ie(te,"input",i[7]),Ie(S,"submit",Pe(i[4]))],De=!0)},p(H,Y){var ve,Se;(!Ve||Y&1)&&d!==(d=(((ve=H[0])==null?void 0:ve.name)||((Se=H[3])==null?void 0:Se.name))+"")&&mt(p,d);const re={};Y&1&&(re.messages=H[0].messages),Y&1&&(re.pageChat=H[0].page),Y&1&&(re.users=H[0].users),!x&&Y&4&&(x=!0,re.messagesLoadMore=H[2],ks(()=>x=!1)),k.$set(re),(!Ve||Y&2&&X!==(X="flex-none flex space-x-2 items-center w-[88px] transition-all overflow-hidden "+(H[1]!=""?"!w-0 !-ml-2":"")))&&e(D,"class",X),Y&2&&te.value!==H[1]&&$t(te,H[1]),je!==(je=qe(H))&&(ie.d(1),ie=je(H),ie&&(ie.c(),ie.m(S,null)))},i(H){Ve||(ce(k.$$.fragment,H),Ve=!0)},o(H){_e(k.$$.fragment,H),Ve=!1},d(H){H&&o(t),yt(k),ie.d(),De=!1,St(Ge)}}}function Hs(i){let t,s,l;return{c(){t=f("span"),s=B("svg"),l=B("path"),this.h()},l(r){t=v(r,"SPAN",{class:!0});var u=c(t);s=N(u,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var n=c(s);l=N(n,"path",{d:!0}),c(l).forEach(o),n.forEach(o),u.forEach(o),this.h()},h(){e(l,"d","M4 21h1V8H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2zM20 8h-7l1.122-3.368A2 2 0 0 0 12.225 2H12L7 7.438V21h11l3.912-8.596L22 12v-2a2 2 0 0 0-2-2z"),e(s,"xmlns","http://www.w3.org/2000/svg"),e(s,"width","24"),e(s,"height","24"),e(s,"viewBox","0 0 24 24"),e(t,"class","flex-none icon w-6 h-6 p-0.5 rounded-full hover:bg-gray-100 cursor-pointer")},m(r,u){J(r,t,u),a(t,s),a(s,l)},d(r){r&&o(t)}}}function Os(i){let t,s,l;return{c(){t=f("button"),s=B("svg"),l=B("path"),this.h()},l(r){t=v(r,"BUTTON",{type:!0,class:!0});var u=c(t);s=N(u,"svg",{class:!0,height:!0,viewBox:!0,width:!0});var n=c(s);l=N(n,"path",{d:!0}),c(l).forEach(o),n.forEach(o),u.forEach(o),this.h()},h(){e(l,"d","M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z"),e(s,"class","xsrhx6k"),e(s,"height","20px"),e(s,"viewBox","0 0 24 24"),e(s,"width","20px"),e(t,"type","submit"),e(t,"class","flex-none icon w-6 h-6 p-0.5 rounded-full hover:bg-gray-100 cursor-pointer")},m(r,u){J(r,t,u),a(t,s),a(s,l)},d(r){r&&o(t)}}}function js(i){let t,s,l=i[0].show&&ns(i);return{c(){l&&l.c(),t=Yt()},l(r){l&&l.l(r),t=Yt()},m(r,u){l&&l.m(r,u),J(r,t,u),s=!0},p(r,[u]){r[0].show?l?(l.p(r,u),u&1&&ce(l,1)):(l=ns(r),l.c(),ce(l,1),l.m(t.parentNode,t)):l&&(lt(),_e(l,1,1,()=>{l=null}),at())},i(r){s||(ce(l),s=!0)},o(r){_e(l),s=!1},d(r){l&&l.d(r),r&&o(t)}}}function Us(i,t,s){let l;_t(i,wt,b=>s(10,l=b));let{room:r}=t,u=r==null?void 0:r.users.find(b=>{var k,x;return b.id!=((x=(k=l.data)==null?void 0:k.user)==null?void 0:x.id)}),n="",h=null,d=!1;h=new IntersectionObserver((b,k)=>{b.forEach(x=>{x.isIntersecting&&(x.target,x.intersectionRatio>=.75&&p())})});const p=async()=>{try{if(d)return;d=!0;const k=await(await fetch("/api/v1/messages/"+(r==null?void 0:r.id))).json();s(0,r.messages=[...k.messages,...r.messages],r),k.messages.length<k.perPage?s(0,r.page=null,r):s(0,r.page++,r)}catch(b){console.log(b)}finally{d=!1}},_=()=>{Et.emit("message",{roomId:r.id,userId:l.data.user.id,body:n}),s(1,n="")};let g=null;ws(()=>{h&&g&&h.observe(g)}),xs(()=>{h&&h.disconnect()});const z=()=>s(0,r.show=!1,r);function I(b){g=b,s(2,g)}function M(){n=this.value,s(1,n)}return i.$$set=b=>{"room"in b&&s(0,r=b.room)},[r,n,g,u,_,z,I,M]}class Rs extends vt{constructor(t){super(),gt(this,t,Us,js,pt,{room:0})}}function is(i,t,s){var u;const l=i.slice();l[17]=t[s],l[19]=t,l[20]=s;const r=(u=l[17])==null?void 0:u.users.find(n=>{var h,d;return n.id!=((d=(h=l[5].data)==null?void 0:h.user)==null?void 0:d.id)});return l[18]=r,l}function cs(i,t,s){const l=i.slice();return l[17]=t[s],l}function hs(i,t,s){var u;const l=i.slice();l[17]=t[s];const r=(u=l[17])==null?void 0:u.users.find(n=>{var h,d;return n.id!=((d=(h=l[5].data)==null?void 0:h.user)==null?void 0:d.id)});return l[18]=r,l}function us(i,t,s){const l=i.slice();return l[23]=t[s],l}function ds(i){let t,s,l,r,u,n,h,d,p,_,g,z,I,M,b,k,x,V,S,E,m,y,w,D,W,j,O,F;function K(C,P){if(C[1]==1)return Fs;if(C[1]==2)return Ws}let $=K(i),A=$&&$(i);return{c(){t=f("div"),s=f("div"),l=f("h5"),r=U("New message"),u=L(),n=f("button"),h=f("span"),d=B("svg"),p=B("path"),_=L(),g=f("div"),z=f("span"),I=U("Send:"),M=L(),b=f("input"),k=L(),x=f("div"),V=f("button"),S=U("Contacts"),m=L(),y=f("button"),w=U("Rooms"),W=L(),j=f("div"),A&&A.c(),this.h()},l(C){t=v(C,"DIV",{class:!0});var P=c(t);s=v(P,"DIV",{class:!0});var G=c(s);l=v(G,"H5",{});var Q=c(l);r=R(Q,"New message"),Q.forEach(o),u=T(G),n=v(G,"BUTTON",{});var de=c(n);h=v(de,"SPAN",{class:!0});var le=c(h);d=N(le,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var ae=c(d);p=N(ae,"path",{d:!0}),c(p).forEach(o),ae.forEach(o),le.forEach(o),de.forEach(o),G.forEach(o),_=T(P),g=v(P,"DIV",{class:!0});var he=c(g);z=v(he,"SPAN",{class:!0});var X=c(z);I=R(X,"Send:"),X.forEach(o),M=T(he),b=v(he,"INPUT",{type:!0,class:!0}),he.forEach(o),k=T(P),x=v(P,"DIV",{class:!0});var ee=c(x);V=v(ee,"BUTTON",{class:!0});var Z=c(V);S=R(Z,"Contacts"),Z.forEach(o),m=T(ee),y=v(ee,"BUTTON",{class:!0});var te=c(y);w=R(te,"Rooms"),te.forEach(o),ee.forEach(o),W=T(P),j=v(P,"DIV",{class:!0});var me=c(j);A&&A.l(me),me.forEach(o),P.forEach(o),this.h()},h(){e(p,"d","m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"),e(d,"xmlns","http://www.w3.org/2000/svg"),e(d,"width","24"),e(d,"height","24"),e(d,"viewBox","0 0 24 24"),e(h,"class","icon"),e(s,"class","flex-none flex justify-between space-x-4 px-4"),e(z,"class","flex-none"),e(b,"type","text"),e(b,"class","border-none flex-grow min-w-0"),e(g,"class","flex-none flex justify-between space-x-4 p-4 border-b"),e(V,"class",E="w-1/2 text-center py-4 border-b-4 border-transparent "+(i[1]==1?"border-blue-500 text-blue-500":"")),e(y,"class",D="w-1/2 text-center py-4 border-b-4 border-transparent "+(i[1]==2?"border-blue-500 text-blue-500":"")),e(x,"class","flex-none flex shadow"),e(j,"class","flex-grow"),e(t,"class","flex-none flex flex-col bg-white shadow rounded py-4 min-w-[250px] max-h-96 h-full text-sm pointer-events-auto")},m(C,P){J(C,t,P),a(t,s),a(s,l),a(l,r),a(s,u),a(s,n),a(n,h),a(h,d),a(d,p),a(t,_),a(t,g),a(g,z),a(z,I),a(g,M),a(g,b),a(t,k),a(t,x),a(x,V),a(V,S),a(x,m),a(x,y),a(y,w),a(t,W),a(t,j),A&&A.m(j,null),O||(F=[Ie(n,"click",Pe(i[8])),Ie(V,"click",Pe(i[9])),Ie(y,"click",Pe(i[10]))],O=!0)},p(C,P){P&2&&E!==(E="w-1/2 text-center py-4 border-b-4 border-transparent "+(C[1]==1?"border-blue-500 text-blue-500":""))&&e(V,"class",E),P&2&&D!==(D="w-1/2 text-center py-4 border-b-4 border-transparent "+(C[1]==2?"border-blue-500 text-blue-500":""))&&e(y,"class",D),$===($=K(C))&&A?A.p(C,P):(A&&A.d(1),A=$&&$(C),A&&(A.c(),A.m(j,null)))},d(C){C&&o(t),A&&A.d(),O=!1,St(F)}}}function Ws(i){let t,s=i[3],l=[];for(let r=0;r<s.length;r+=1)l[r]=fs(hs(i,s,r));return{c(){t=f("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){t=v(r,"DIV",{class:!0});var u=c(t);for(let n=0;n<l.length;n+=1)l[n].l(u);u.forEach(o),this.h()},h(){e(t,"class","flex flex-col")},m(r,u){J(r,t,u);for(let n=0;n<l.length;n+=1)l[n].m(t,null)},p(r,u){if(u&168){s=r[3];let n;for(n=0;n<s.length;n+=1){const h=hs(r,s,n);l[n]?l[n].p(h,u):(l[n]=fs(h),l[n].c(),l[n].m(t,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=s.length}},d(r){r&&o(t),tt(l,r)}}}function Fs(i){let t,s=i[2],l=[];for(let r=0;r<s.length;r+=1)l[r]=vs(us(i,s,r));return{c(){t=f("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){t=v(r,"DIV",{class:!0});var u=c(t);for(let n=0;n<l.length;n+=1)l[n].l(u);u.forEach(o),this.h()},h(){e(t,"class","flex flex-col")},m(r,u){J(r,t,u);for(let n=0;n<l.length;n+=1)l[n].m(t,null)},p(r,u){if(u&68){s=r[2];let n;for(n=0;n<s.length;n+=1){const h=us(r,s,n);l[n]?l[n].p(h,u):(l[n]=vs(h),l[n].c(),l[n].m(t,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=s.length}},d(r){r&&o(t),tt(l,r)}}}function fs(i){var x,V;let t,s,l,r,u,n,h,d=(((x=i[17])==null?void 0:x.name)||((V=i[18])==null?void 0:V.name))+"",p,_,g,z,I,M,b;function k(){return i[12](i[17])}return{c(){t=f("button"),s=f("div"),l=f("img"),u=L(),n=f("div"),h=f("h3"),p=U(d),_=L(),g=f("span"),z=U("last seen in 12 minutes ago"),I=L(),this.h()},l(S){t=v(S,"BUTTON",{class:!0});var E=c(t);s=v(E,"DIV",{class:!0});var m=c(s);l=v(m,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),m.forEach(o),u=T(E),n=v(E,"DIV",{class:!0});var y=c(n);h=v(y,"H3",{class:!0});var w=c(h);p=R(w,d),w.forEach(o),_=T(y),g=v(y,"SPAN",{class:!0});var D=c(g);z=R(D,"last seen in 12 minutes ago"),D.forEach(o),y.forEach(o),I=T(E),E.forEach(o),this.h()},h(){var S,E;ke(l.src,r=((S=i[17])==null?void 0:S.image)||((E=i[18])==null?void 0:E.image))||e(l,"src",r),e(l,"alt",""),e(l,"class","w-10 h-10 rounded-full object-cover"),e(l,"loading","lazy"),e(s,"class","flex-none"),e(h,"class","truncate"),e(g,"class","text-gray-500 text-xs truncate"),e(n,"class","flex-grow flex flex-col"),e(t,"class","flex text-left space-x-2 py-2 px-4 hover:bg-blue-100")},m(S,E){J(S,t,E),a(t,s),a(s,l),a(t,u),a(t,n),a(n,h),a(h,p),a(n,_),a(n,g),a(g,z),a(t,I),M||(b=Ie(t,"click",Pe(k)),M=!0)},p(S,E){var m,y,w,D;i=S,E&40&&!ke(l.src,r=((m=i[17])==null?void 0:m.image)||((y=i[18])==null?void 0:y.image))&&e(l,"src",r),E&40&&d!==(d=(((w=i[17])==null?void 0:w.name)||((D=i[18])==null?void 0:D.name))+"")&&mt(p,d)},d(S){S&&o(t),M=!1,b()}}}function vs(i){var x;let t,s,l,r,u,n,h,d=((x=i[23])==null?void 0:x.name)+"",p,_,g,z,I,M,b;function k(){return i[11](i[23])}return{c(){t=f("button"),s=f("div"),l=f("img"),u=L(),n=f("div"),h=f("h3"),p=U(d),_=L(),g=f("span"),z=U("last seen in 12 minutes ago"),I=L(),this.h()},l(V){t=v(V,"BUTTON",{class:!0});var S=c(t);s=v(S,"DIV",{class:!0});var E=c(s);l=v(E,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),E.forEach(o),u=T(S),n=v(S,"DIV",{class:!0});var m=c(n);h=v(m,"H3",{class:!0});var y=c(h);p=R(y,d),y.forEach(o),_=T(m),g=v(m,"SPAN",{class:!0});var w=c(g);z=R(w,"last seen in 12 minutes ago"),w.forEach(o),m.forEach(o),I=T(S),S.forEach(o),this.h()},h(){var V;ke(l.src,r=(V=i[23])==null?void 0:V.image)||e(l,"src",r),e(l,"alt",""),e(l,"class","w-10 h-10 rounded-full object-cover"),e(l,"loading","lazy"),e(s,"class","flex-none"),e(h,"class","truncate"),e(g,"class","text-gray-500 text-xs truncate"),e(n,"class","flex-grow flex flex-col"),e(t,"class","flex text-left space-x-2 py-2 px-4 hover:bg-blue-100")},m(V,S){J(V,t,S),a(t,s),a(s,l),a(t,u),a(t,n),a(n,h),a(h,p),a(n,_),a(n,g),a(g,z),a(t,I),M||(b=Ie(t,"click",Pe(k)),M=!0)},p(V,S){var E,m;i=V,S&4&&!ke(l.src,r=(E=i[23])==null?void 0:E.image)&&e(l,"src",r),S&4&&d!==(d=((m=i[23])==null?void 0:m.name)+"")&&mt(p,d)},d(V){V&&o(t),M=!1,b()}}}function gs(i){let t,s;return t=new Rs({props:{room:i[17]}}),{c(){xt(t.$$.fragment)},l(l){It(t.$$.fragment,l)},m(l,r){kt(t,l,r),s=!0},p(l,r){const u={};r&16&&(u.room=l[17]),t.$set(u)},i(l){s||(ce(t.$$.fragment,l),s=!0)},o(l){_e(t.$$.fragment,l),s=!1},d(l){yt(t,l)}}}function ps(i){let t,s,l,r,u;function n(){return i[13](i[17],i[19],i[20])}return{c(){t=f("button"),s=f("img"),this.h()},l(h){t=v(h,"BUTTON",{class:!0});var d=c(t);s=v(d,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),d.forEach(o),this.h()},h(){var h,d;ke(s.src,l=((h=i[17])==null?void 0:h.image)||((d=i[18])==null?void 0:d.image))||e(s,"src",l),e(s,"alt"," "),e(s,"class","w-full h-full object-cover"),e(s,"loading","lazy"),e(t,"class","w-12 h-12 rounded-full bg-white shadow overflow-hidden")},m(h,d){J(h,t,d),a(t,s),r||(u=Ie(t,"click",Pe(n)),r=!0)},p(h,d){var p,_;i=h,d&48&&!ke(s.src,l=((p=i[17])==null?void 0:p.image)||((_=i[18])==null?void 0:_.image))&&e(s,"src",l)},d(h){h&&o(t),r=!1,u()}}}function Gs(i){let t,s,l,r,u,n,h,d,p,_,g,z,I,M,b=i[0]&&ds(i),k=i[4],x=[];for(let m=0;m<k.length;m+=1)x[m]=gs(cs(i,k,m));const V=m=>_e(x[m],1,1,()=>{x[m]=null});let S=i[4],E=[];for(let m=0;m<S.length;m+=1)E[m]=ps(is(i,S,m));return{c(){t=f("div"),s=f("div"),b&&b.c(),l=L();for(let m=0;m<x.length;m+=1)x[m].c();r=L(),u=f("div");for(let m=0;m<E.length;m+=1)E[m].c();n=L(),h=f("button"),d=f("span"),p=B("svg"),_=B("path"),g=B("path"),this.h()},l(m){t=v(m,"DIV",{class:!0});var y=c(t);s=v(y,"DIV",{class:!0});var w=c(s);b&&b.l(w),l=T(w);for(let F=0;F<x.length;F+=1)x[F].l(w);r=T(w),u=v(w,"DIV",{class:!0});var D=c(u);for(let F=0;F<E.length;F+=1)E[F].l(D);n=T(D),h=v(D,"BUTTON",{class:!0});var W=c(h);d=v(W,"SPAN",{class:!0});var j=c(d);p=N(j,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var O=c(p);_=N(O,"path",{d:!0}),c(_).forEach(o),g=N(O,"path",{d:!0}),c(g).forEach(o),O.forEach(o),j.forEach(o),W.forEach(o),D.forEach(o),w.forEach(o),y.forEach(o),this.h()},h(){e(_,"d","m18.988 2.012 3 3L19.701 7.3l-3-3zM8 16h3l7.287-7.287-3-3L8 13z"),e(g,"d","M19 19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .896-2 2v14c0 1.104.897 2 2 2h14a2 2 0 0 0 2-2v-8.668l-2 2V19z"),e(p,"xmlns","http://www.w3.org/2000/svg"),e(p,"width","24"),e(p,"height","24"),e(p,"viewBox","0 0 24 24"),e(d,"class","icon w-12 h-12 rounded-full bg-white shadow p-3"),e(h,"class","rounded-full"),e(u,"class","flex-none flex flex-col space-y-4 pointer-events-auto"),e(s,"class","flex w-full h-full items-end justify-end space-x-4"),e(t,"class","fixed right-0 bottom-0 left-0 top-0 p-4 pointer-events-none")},m(m,y){J(m,t,y),a(t,s),b&&b.m(s,null),a(s,l);for(let w=0;w<x.length;w+=1)x[w].m(s,null);a(s,r),a(s,u);for(let w=0;w<E.length;w+=1)E[w].m(u,null);a(u,n),a(u,h),a(h,d),a(d,p),a(p,_),a(p,g),z=!0,I||(M=Ie(h,"click",Pe(i[14])),I=!0)},p(m,[y]){if(m[0]?b?b.p(m,y):(b=ds(m),b.c(),b.m(s,l)):b&&(b.d(1),b=null),y&16){k=m[4];let w;for(w=0;w<k.length;w+=1){const D=cs(m,k,w);x[w]?(x[w].p(D,y),ce(x[w],1)):(x[w]=gs(D),x[w].c(),ce(x[w],1),x[w].m(s,r))}for(lt(),w=k.length;w<x.length;w+=1)V(w);at()}if(y&48){S=m[4];let w;for(w=0;w<S.length;w+=1){const D=is(m,S,w);E[w]?E[w].p(D,y):(E[w]=ps(D),E[w].c(),E[w].m(u,n))}for(;w<E.length;w+=1)E[w].d(1);E.length=S.length}},i(m){if(!z){for(let y=0;y<k.length;y+=1)ce(x[y]);z=!0}},o(m){x=x.filter(Boolean);for(let y=0;y<x.length;y+=1)_e(x[y]);z=!1},d(m){m&&o(t),b&&b.d(),tt(x,m),tt(E,m),I=!1,M()}}}function qs(i,t,s){let l;_t(i,wt,E=>s(5,l=E));let r=!1,u=1,n=[],h=[],d=[];const p=async()=>{try{return(await(await fetch("/api/v1/users")).json()).users.filter(y=>y.id!=l.data.user.id)}catch{return[]}},_=async()=>{try{return(await(await fetch("/api/v1/rooms")).json()).rooms}catch{return[]}},g=async E=>{let m=h.findIndex(w=>(w==null?void 0:w.users.findIndex(D=>D.id==E))>=0),y=null;if(m<0)try{y=(await(await fetch("/api/v1/rooms",{method:"post",body:JSON.stringify({contactId:E})})).json()).room}catch(w){console.log(w)}else y=h[m];if(y){let w=d.findIndex(D=>D.id==y.id);w<0?s(4,d=[...d,{...y,show:!0,messages:[],page:1}]):s(4,d[w].show=!0,d),s(1,u=2),s(0,r=!1)}},z=E=>{let m=h.find(w=>w.id==E),y=d.findIndex(w=>w.id==E);y<0?s(4,d=[...d,{...m,show:!0,messages:[],page:1}]):s(4,d[y].show=!0,d),s(1,u=2),s(0,r=!1)};return ws(async()=>{var E,m,y;Et.on("message",w=>{let D=d.findIndex(W=>W.id==w.message.roomId);D>=0&&s(4,d[D].messages=[w.message,...d[D].messages],d)}),(E=l.data)!=null&&E.user&&Et.emit("join",(y=(m=l.data)==null?void 0:m.user)==null?void 0:y.id),s(2,[n,h]=await Promise.all([await p(),await _()]),n,s(3,h))}),[r,u,n,h,d,l,g,z,()=>s(0,r=!1),()=>s(1,u=1),()=>s(1,u=2),E=>g(E.id),E=>z(E.id),(E,m,y)=>s(4,m[y].show=!0,d),()=>s(0,r=!0)]}class Js extends vt{constructor(t){super(),gt(this,t,qs,Gs,pt,{})}}function _s(i){let t,s,l,r,u,n,h,d,p,_,g,z,I,M,b,k,x,V,S,E,m,y,w,D,W,j,O,F,K,$,A,C,P,G,Q,de,le,ae,he,X,ee,Z,te,me,oe,q,fe,be,ne,pe,We,Ve,De,Ge,st,Ae,qe,je,ie,ye,Ce,H,Y,re,ve,Se,Je,we,He,Ee,Ke,Oe,Le,Qe,ze,Xe,Ue,Te,ge,ue,Fe,xe,rt;const zt=[Qs,Ks],Re=[];function Vt(se,Me){return se[0].user?0:1}return ge=Vt(i),ue=Re[ge]=zt[ge](i),{c(){t=f("div"),s=f("div"),l=f("a"),r=f("img"),n=L(),h=f("div"),d=f("h1"),p=U("Việt Hùng IT"),_=L(),g=f("h5"),z=U("Developer . Transporter"),I=L(),M=f("div"),b=f("div"),k=U("English News"),x=L(),V=f("div"),S=f("div"),E=f("span"),m=U("IELTS Online Test"),y=L(),w=f("span"),D=B("svg"),W=B("path"),j=L(),O=f("div"),F=f("div"),K=U("IELTS Full Test"),$=L(),A=f("div"),C=U("IELTS Listening Practice"),P=L(),G=f("div"),Q=U("IELTS Reading Practice"),de=L(),le=f("div"),ae=U("Spell copy"),he=L(),X=f("div"),ee=f("div"),Z=f("span"),te=U("IELTS Writing Sample"),me=L(),oe=f("span"),q=B("svg"),fe=B("path"),be=L(),ne=f("div"),pe=f("div"),We=U("IELTS Writing Sample Task 1"),Ve=L(),De=f("div"),Ge=U("IELTS Writing Sample Task 2"),st=L(),Ae=f("div"),qe=U("IELTS Writing Sample Task 3"),je=L(),ie=f("div"),ye=f("div"),Ce=f("span"),H=U("IELTS Speaking Sample"),Y=L(),re=f("span"),ve=B("svg"),Se=B("path"),Je=L(),we=f("div"),He=f("div"),Ee=U("IELTS Speaking Part 1"),Ke=L(),Oe=f("div"),Le=U("IELTS Speaking Part 2"),Qe=L(),ze=f("div"),Xe=U("IELTS Speaking Part 3"),Ue=L(),Te=f("div"),ue.c(),Fe=L(),xe=f("div"),this.h()},l(se){t=v(se,"DIV",{class:!0});var Me=c(t);s=v(Me,"DIV",{class:!0});var Be=c(s);l=v(Be,"A",{href:!0,class:!0});var ot=c(l);r=v(ot,"IMG",{src:!0,alt:!0,class:!0}),n=T(ot),h=v(ot,"DIV",{class:!0});var nt=c(h);d=v(nt,"H1",{class:!0});var Dt=c(d);p=R(Dt,"Việt Hùng IT"),Dt.forEach(o),_=T(nt),g=v(nt,"H5",{class:!0});var Lt=c(g);z=R(Lt,"Developer . Transporter"),Lt.forEach(o),nt.forEach(o),ot.forEach(o),I=T(Be),M=v(Be,"DIV",{class:!0});var Ne=c(M);b=v(Ne,"DIV",{class:!0});var Tt=c(b);k=R(Tt,"English News"),Tt.forEach(o),x=T(Ne),V=v(Ne,"DIV",{class:!0});var it=c(V);S=v(it,"DIV",{class:!0});var ct=c(S);E=v(ct,"SPAN",{class:!0});var Mt=c(E);m=R(Mt,"IELTS Online Test"),Mt.forEach(o),y=T(ct),w=v(ct,"SPAN",{class:!0});var Bt=c(w);D=N(Bt,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var Nt=c(D);W=N(Nt,"path",{d:!0}),c(W).forEach(o),Nt.forEach(o),Bt.forEach(o),ct.forEach(o),j=T(it),O=v(it,"DIV",{class:!0});var Ze=c(O);F=v(Ze,"DIV",{class:!0});var Pt=c(F);K=R(Pt,"IELTS Full Test"),Pt.forEach(o),$=T(Ze),A=v(Ze,"DIV",{class:!0});var At=c(A);C=R(At,"IELTS Listening Practice"),At.forEach(o),P=T(Ze),G=v(Ze,"DIV",{class:!0});var Ct=c(G);Q=R(Ct,"IELTS Reading Practice"),Ct.forEach(o),Ze.forEach(o),it.forEach(o),de=T(Ne),le=v(Ne,"DIV",{class:!0});var Ht=c(le);ae=R(Ht,"Spell copy"),Ht.forEach(o),he=T(Ne),X=v(Ne,"DIV",{class:!0});var ht=c(X);ee=v(ht,"DIV",{class:!0});var ut=c(ee);Z=v(ut,"SPAN",{class:!0});var Ot=c(Z);te=R(Ot,"IELTS Writing Sample"),Ot.forEach(o),me=T(ut),oe=v(ut,"SPAN",{class:!0});var jt=c(oe);q=N(jt,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var Ut=c(q);fe=N(Ut,"path",{d:!0}),c(fe).forEach(o),Ut.forEach(o),jt.forEach(o),ut.forEach(o),be=T(ht),ne=v(ht,"DIV",{class:!0});var Ye=c(ne);pe=v(Ye,"DIV",{class:!0});var Rt=c(pe);We=R(Rt,"IELTS Writing Sample Task 1"),Rt.forEach(o),Ve=T(Ye),De=v(Ye,"DIV",{class:!0});var Wt=c(De);Ge=R(Wt,"IELTS Writing Sample Task 2"),Wt.forEach(o),st=T(Ye),Ae=v(Ye,"DIV",{class:!0});var Ft=c(Ae);qe=R(Ft,"IELTS Writing Sample Task 3"),Ft.forEach(o),Ye.forEach(o),ht.forEach(o),je=T(Ne),ie=v(Ne,"DIV",{class:!0});var dt=c(ie);ye=v(dt,"DIV",{class:!0});var ft=c(ye);Ce=v(ft,"SPAN",{class:!0});var Gt=c(Ce);H=R(Gt,"IELTS Speaking Sample"),Gt.forEach(o),Y=T(ft),re=v(ft,"SPAN",{class:!0});var qt=c(re);ve=N(qt,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var Jt=c(ve);Se=N(Jt,"path",{d:!0}),c(Se).forEach(o),Jt.forEach(o),qt.forEach(o),ft.forEach(o),Je=T(dt),we=v(dt,"DIV",{class:!0});var $e=c(we);He=v($e,"DIV",{class:!0});var Kt=c(He);Ee=R(Kt,"IELTS Speaking Part 1"),Kt.forEach(o),Ke=T($e),Oe=v($e,"DIV",{class:!0});var Qt=c(Oe);Le=R(Qt,"IELTS Speaking Part 2"),Qt.forEach(o),Qe=T($e),ze=v($e,"DIV",{class:!0});var Xt=c(ze);Xe=R(Xt,"IELTS Speaking Part 3"),Xt.forEach(o),$e.forEach(o),dt.forEach(o),Ne.forEach(o),Ue=T(Be),Te=v(Be,"DIV",{class:!0});var Zt=c(Te);ue.l(Zt),Zt.forEach(o),Be.forEach(o),Me.forEach(o),Fe=T(se),xe=v(se,"DIV",{class:!0}),c(xe).forEach(o),this.h()},h(){ke(r.src,u=Bs)||e(r,"src",u),e(r,"alt",""),e(r,"class","w-10 h-10 rounded"),e(d,"class","text-lg font-semibold"),e(g,"class","text-xs text-gray-500"),e(h,"class","logo-title"),e(l,"href","/"),e(l,"class","flex-none flex items-center space-x-1 py-3"),e(b,"class","nav-link svelte-13iz090"),e(E,"class","svelte-13iz090"),e(W,"d","M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"),e(D,"xmlns","http://www.w3.org/2000/svg"),e(D,"width","24"),e(D,"height","24"),e(D,"viewBox","0 0 24 24"),e(w,"class","icon w-4 h-4 svelte-13iz090"),e(S,"class","text svelte-13iz090"),e(F,"class","item svelte-13iz090"),e(A,"class","item svelte-13iz090"),e(G,"class","item svelte-13iz090"),e(O,"class","menu svelte-13iz090"),e(V,"class","dropdown svelte-13iz090"),e(le,"class","nav-link svelte-13iz090"),e(Z,"class","svelte-13iz090"),e(fe,"d","M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"),e(q,"xmlns","http://www.w3.org/2000/svg"),e(q,"width","24"),e(q,"height","24"),e(q,"viewBox","0 0 24 24"),e(oe,"class","icon w-4 h-4 svelte-13iz090"),e(ee,"class","text svelte-13iz090"),e(pe,"class","item svelte-13iz090"),e(De,"class","item svelte-13iz090"),e(Ae,"class","item svelte-13iz090"),e(ne,"class","menu svelte-13iz090"),e(X,"class","dropdown svelte-13iz090"),e(Ce,"class","svelte-13iz090"),e(Se,"d","M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"),e(ve,"xmlns","http://www.w3.org/2000/svg"),e(ve,"width","24"),e(ve,"height","24"),e(ve,"viewBox","0 0 24 24"),e(re,"class","icon w-4 h-4 svelte-13iz090"),e(ye,"class","text svelte-13iz090"),e(He,"class","item svelte-13iz090"),e(Oe,"class","item svelte-13iz090"),e(ze,"class","item svelte-13iz090"),e(we,"class","menu svelte-13iz090"),e(ie,"class","dropdown svelte-13iz090"),e(M,"class","hidden md:flex !ml-auto self-stretch items-stretch space-x-6"),e(Te,"class","!ml-auto"),e(s,"class","flex items-center space-x-6"),e(t,"class","fixed top-0 left-0 w-full h-16 px-8 shadow-sm shadow-gray-200 bg-white"),e(xe,"class","flex-none w-full h-16 shadow-lg shadow-gray-200")},m(se,Me){J(se,t,Me),a(t,s),a(s,l),a(l,r),a(l,n),a(l,h),a(h,d),a(d,p),a(h,_),a(h,g),a(g,z),a(s,I),a(s,M),a(M,b),a(b,k),a(M,x),a(M,V),a(V,S),a(S,E),a(E,m),a(S,y),a(S,w),a(w,D),a(D,W),a(V,j),a(V,O),a(O,F),a(F,K),a(O,$),a(O,A),a(A,C),a(O,P),a(O,G),a(G,Q),a(M,de),a(M,le),a(le,ae),a(M,he),a(M,X),a(X,ee),a(ee,Z),a(Z,te),a(ee,me),a(ee,oe),a(oe,q),a(q,fe),a(X,be),a(X,ne),a(ne,pe),a(pe,We),a(ne,Ve),a(ne,De),a(De,Ge),a(ne,st),a(ne,Ae),a(Ae,qe),a(M,je),a(M,ie),a(ie,ye),a(ye,Ce),a(Ce,H),a(ye,Y),a(ye,re),a(re,ve),a(ve,Se),a(ie,Je),a(ie,we),a(we,He),a(He,Ee),a(we,Ke),a(we,Oe),a(Oe,Le),a(we,Qe),a(we,ze),a(ze,Xe),a(s,Ue),a(s,Te),Re[ge].m(Te,null),J(se,Fe,Me),J(se,xe,Me),rt=!0},p(se,Me){let Be=ge;ge=Vt(se),ge===Be?Re[ge].p(se,Me):(lt(),_e(Re[Be],1,1,()=>{Re[Be]=null}),at(),ue=Re[ge],ue?ue.p(se,Me):(ue=Re[ge]=zt[ge](se),ue.c()),ce(ue,1),ue.m(Te,null))},i(se){rt||(ce(ue),rt=!0)},o(se){_e(ue),rt=!1},d(se){se&&o(t),Re[ge].d(),se&&o(Fe),se&&o(xe)}}}function Ks(i){let t,s;return{c(){t=f("a"),s=U("Sign up"),this.h()},l(l){t=v(l,"A",{href:!0,class:!0});var r=c(t);s=R(r,"Sign up"),r.forEach(o),this.h()},h(){e(t,"href","/auth/login"),e(t,"class","btn btn-red rounded-lg")},m(l,r){J(l,t,r),a(t,s)},p:et,i:et,o:et,d(l){l&&o(t)}}}function Qs(i){let t,s,l,r,u,n,h,d,p,_,g,z,I,M,b,k=i[2]&&ms(i);return{c(){t=f("div"),s=f("div"),l=f("div"),r=f("img"),h=L(),d=f("span"),p=B("svg"),_=B("path"),z=L(),k&&k.c(),this.h()},l(x){t=v(x,"DIV",{class:!0});var V=c(t);s=v(V,"DIV",{class:!0});var S=c(s);l=v(S,"DIV",{class:!0});var E=c(l);r=v(E,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),E.forEach(o),h=T(S),d=v(S,"SPAN",{class:!0});var m=c(d);p=N(m,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var y=c(p);_=N(y,"path",{d:!0}),c(_).forEach(o),y.forEach(o),m.forEach(o),S.forEach(o),z=T(V),k&&k.l(V),V.forEach(o),this.h()},h(){var x,V;ke(r.src,u=(x=i[0].user)==null?void 0:x.image)||e(r,"src",u),e(r,"alt",n="Photo by "+((V=i[0].user)==null?void 0:V.name)),e(r,"class","w-full h-full object-cover"),e(r,"loading","lazy"),e(l,"class","w-10 h-10 border rounded-full overflow-hidden cursor-pointer"),e(_,"d","M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"),e(p,"xmlns","http://www.w3.org/2000/svg"),e(p,"width","24"),e(p,"height","24"),e(p,"viewBox","0 0 24 24"),e(d,"class",g="icon transition-all cursor-pointer "+(i[2]?"rotate-180":"")),e(s,"class","flex space-x-1 items-center"),e(t,"class","relative")},m(x,V){J(x,t,V),a(t,s),a(s,l),a(l,r),a(s,h),a(s,d),a(d,p),a(p,_),a(t,z),k&&k.m(t,null),I=!0,M||(b=[Ie(s,"click",Pe(i[7])),bs(Ns.call(null,t)),Ie(t,"click_outside",i[9])],M=!0)},p(x,V){var S,E;(!I||V&1&&!ke(r.src,u=(S=x[0].user)==null?void 0:S.image))&&e(r,"src",u),(!I||V&1&&n!==(n="Photo by "+((E=x[0].user)==null?void 0:E.name)))&&e(r,"alt",n),(!I||V&4&&g!==(g="icon transition-all cursor-pointer "+(x[2]?"rotate-180":"")))&&e(d,"class",g),x[2]?k?(k.p(x,V),V&4&&ce(k,1)):(k=ms(x),k.c(),ce(k,1),k.m(t,null)):k&&(lt(),_e(k,1,1,()=>{k=null}),at())},i(x){I||(ce(k),I=!0)},o(x){_e(k),I=!1},d(x){x&&o(t),k&&k.d(),M=!1,St(b)}}}function ms(i){let t,s,l,r,u,n,h,d,p,_,g,z,I,M,b,k,x,V,S,E,m,y,w,D,W,j,O,F,K,$,A,C;return{c(){t=f("div"),s=f("div"),l=f("a"),r=f("span"),u=B("svg"),n=B("path"),h=L(),d=f("span"),p=U("User Information"),_=L(),g=f("a"),z=f("span"),I=B("svg"),M=B("path"),b=L(),k=f("span"),x=U("Pro Account"),S=L(),E=f("form"),m=f("button"),y=f("span"),w=B("svg"),D=B("path"),W=B("path"),j=L(),O=f("span"),F=U("Logout"),this.h()},l(P){t=v(P,"DIV",{class:!0});var G=c(t);s=v(G,"DIV",{class:!0});var Q=c(s);l=v(Q,"A",{href:!0,class:!0});var de=c(l);r=v(de,"SPAN",{class:!0});var le=c(r);u=N(le,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var ae=c(u);n=N(ae,"path",{d:!0}),c(n).forEach(o),ae.forEach(o),le.forEach(o),h=T(de),d=v(de,"SPAN",{class:!0});var he=c(d);p=R(he,"User Information"),he.forEach(o),de.forEach(o),_=T(Q),g=v(Q,"A",{href:!0,class:!0});var X=c(g);z=v(X,"SPAN",{class:!0});var ee=c(z);I=N(ee,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var Z=c(I);M=N(Z,"path",{d:!0}),c(M).forEach(o),Z.forEach(o),ee.forEach(o),b=T(X),k=v(X,"SPAN",{class:!0});var te=c(k);x=R(te,"Pro Account"),te.forEach(o),X.forEach(o),S=T(Q),E=v(Q,"FORM",{action:!0,method:!0,class:!0});var me=c(E);m=v(me,"BUTTON",{type:!0,class:!0});var oe=c(m);y=v(oe,"SPAN",{class:!0});var q=c(y);w=N(q,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var fe=c(w);D=N(fe,"path",{d:!0}),c(D).forEach(o),W=N(fe,"path",{d:!0}),c(W).forEach(o),fe.forEach(o),q.forEach(o),j=T(oe),O=v(oe,"SPAN",{class:!0});var be=c(O);F=R(be,"Logout"),be.forEach(o),oe.forEach(o),me.forEach(o),Q.forEach(o),G.forEach(o),this.h()},h(){e(n,"d","M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z"),e(u,"xmlns","http://www.w3.org/2000/svg"),e(u,"width","24"),e(u,"height","24"),e(u,"viewBox","0 0 24 24"),e(r,"class","icon svelte-13iz090"),e(d,"class","svelte-13iz090"),e(l,"href","/user"),e(l,"class","user-link bg-orange-100 text-orange-700 hover:!bg-orange-200 svelte-13iz090"),e(M,"d","M21.947 9.179a1.001 1.001 0 0 0-.868-.676l-5.701-.453-2.467-5.461a.998.998 0 0 0-1.822-.001L8.622 8.05l-5.701.453a1 1 0 0 0-.619 1.713l4.213 4.107-1.49 6.452a1 1 0 0 0 1.53 1.057L12 18.202l5.445 3.63a1.001 1.001 0 0 0 1.517-1.106l-1.829-6.4 4.536-4.082c.297-.268.406-.686.278-1.065z"),e(I,"xmlns","http://www.w3.org/2000/svg"),e(I,"width","24"),e(I,"height","24"),e(I,"viewBox","0 0 24 24"),e(z,"class","icon svelte-13iz090"),e(k,"class","svelte-13iz090"),e(g,"href","/"),e(g,"class",V="user-link "+(i[1]=="settings"?"active":"")+" svelte-13iz090"),e(D,"d","M16 13v-2H7V8l-5 4 5 4v-3z"),e(W,"d","M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"),e(w,"xmlns","http://www.w3.org/2000/svg"),e(w,"width","24"),e(w,"height","24"),e(w,"viewBox","0 0 24 24"),e(y,"class","logout-icon svelte-13iz090"),e(O,"class","svelte-13iz090"),e(m,"type","submit"),e(m,"class","w-full user-link text-sm svelte-13iz090"),e(E,"action","/auth/login?/logout"),e(E,"method","post"),e(E,"class",""),e(s,"class","min-w-[10rem] flex flex-col space-y-2 mt-1 p-3 bg-white shadow text-sm rounded"),e(t,"class","absolute top-full right-0 z-10")},m(P,G){J(P,t,G),a(t,s),a(s,l),a(l,r),a(r,u),a(u,n),a(l,h),a(l,d),a(d,p),a(s,_),a(s,g),a(g,z),a(z,I),a(I,M),a(g,b),a(g,k),a(k,x),a(s,S),a(s,E),a(E,m),a(m,y),a(y,w),a(w,D),a(w,W),a(m,j),a(m,O),a(O,F),$=!0,A||(C=bs(Ts.call(null,E,i[8])),A=!0)},p(P,G){(!$||G&2&&V!==(V="user-link "+(P[1]=="settings"?"active":"")+" svelte-13iz090"))&&e(g,"class",V)},i(P){$||(Ds(()=>{K||(K=es(t,ts,{duration:300},!0)),K.run(1)}),$=!0)},o(P){K||(K=es(t,ts,{duration:300},!1)),K.run(0),$=!1},d(P){P&&o(t),P&&K&&K.end(),A=!1,C()}}}function Xs(i){let t,s,l,r,u,n,h=i[3]&&_s(i);const d=i[6].default,p=ys(d,i,i[5],null);return u=new Js({}),{c(){t=f("div"),h&&h.c(),s=L(),l=f("div"),p&&p.c(),r=L(),xt(u.$$.fragment),this.h()},l(_){t=v(_,"DIV",{id:!0,class:!0});var g=c(t);h&&h.l(g),s=T(g),l=v(g,"DIV",{class:!0});var z=c(l);p&&p.l(z),z.forEach(o),g.forEach(o),r=T(_),It(u.$$.fragment,_),this.h()},h(){e(l,"class","flex-grow min-h-0 flex flex-col bg-[#F0F2F5]"),e(t,"id","client"),e(t,"class","svelte-13iz090")},m(_,g){J(_,t,g),h&&h.m(t,null),a(t,s),a(t,l),p&&p.m(l,null),J(_,r,g),kt(u,_,g),n=!0},p(_,[g]){_[3]?h?(h.p(_,g),g&8&&ce(h,1)):(h=_s(_),h.c(),ce(h,1),h.m(t,s)):h&&(lt(),_e(h,1,1,()=>{h=null}),at()),p&&p.p&&(!n||g&32)&&Ss(p,d,_,_[5],n?Vs(d,_[5],g,null):zs(_[5]),null)},i(_){n||(ce(h),ce(p,_),ce(u.$$.fragment,_),n=!0)},o(_){_e(h),_e(p,_),_e(u.$$.fragment,_),n=!1},d(_){_&&o(t),h&&h.d(),p&&p.d(_),_&&o(r),yt(u,_)}}}function Zs(i,t,s){let l,r,u;_t(i,wt,I=>s(4,u=I));let{$$slots:n={},$$scope:h}=t,{data:d}=t,p=!1;const _=()=>s(2,p=!p),g=({form:I,data:M,action:b,cancel:k})=>async({result:x,update:V})=>{await Ls(x),await Ms()},z=()=>s(2,p=!1);return i.$$set=I=>{"data"in I&&s(0,d=I.data),"$$scope"in I&&s(5,h=I.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&s(1,l=(u.url.pathname+"/").split("/")[1]),i.$$.dirty&2&&s(3,r=!["practice"].includes(l))},[d,l,p,r,u,h,n,_,g,z]}class rl extends vt{constructor(t){super(),gt(this,t,Zs,Xs,pt,{data:0})}}export{rl as default};
